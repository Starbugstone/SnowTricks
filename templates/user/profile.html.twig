{% extends 'base.html.twig' %}

{% block title %}Profile {{ user.userName }}{% endblock %}

{% block body %}
    <div class="row">
        {% if vich_uploader_asset(user, 'imageFile') is not null %}
            {% set imageUrl = vich_uploader_asset(user, 'imageFile') %}
        {% else %}
            {% set imageUrl = app_default_user_image %}
        {% endif %}

        <div class="col l8 offset-l2">
            <h1 class="valign-wrapper"><img src="{{ imageUrl }}" alt="{{ user.userName }}" class="circle responsive-img mr-3" id="profileImage">{{ user.email }}</h1>
        </div>

    </div>
    <div class="row">
        <div class="col m4 offset-m1">
            <h2>Update profile</h2>
            {{ form_start(form) }}

            {{ form_widget(form) }}
            {{ form_end(form) }}
        </div>

        <div class="col m4 offset-m1">
            <h2>Change password</h2>
            {{ form_start(formPassword) }}

            {{ form_widget(formPassword) }}
            {{ form_end(formPassword) }}
        </div>
    </div>
    <div class="row">
        <div class="col s8 offset-s2">
            <form action="{{ path('admin.delete_profile') }}" method="post" onsubmit="return confirm('are you sure you wish to delete your user account ?')">
                <input type="hidden" name="_token" value="{{ csrf_token('delete-profile'~user.id) }}"/>
                <button class="btn red lighten-2 right">Delete Account</button>
            </form>
        </div>

    </div>
{% endblock %}